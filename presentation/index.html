<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=1024"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <title>PREvant (Preview Servant): Composing Microservices into Reviewable and Testable Applications |
        by Marc Schreiber</title>

    <meta name="author" content="Marc Schreiber"/>

    <link href="css/font-awesome.all.min.css" rel="stylesheet"/>
    <link href="css/impress-demo.css" rel="stylesheet"/>
    <link href="css/prevent.css" rel="stylesheet"/>

    <link href="css/highlight.js/idea.css" rel="stylesheet">
    <script src="js/highlight.pack.js"></script>
</head>

<body class="impress-not-supported"
      style="height: 100%;  overflow: hidden;">


<div class="fallback-message">
    <p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified
        version of this presentation.</p>
    <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>
</div>


<div id="impress">

    <div data-section="Intro" id="title" class="step" data-scale="4" data-x="0" data-y="-13000" data-z="7000"
         data-rotate-x="90" data-rotate-y="0" data-rotate-z="180">
      <h1>
         <span>PREvant</span><br>
         <small>(Preview Servant)</small>
      </h1>
      <div class="container">
         <p>
            Composing Microservices into Reviewable<br>
            and Testable Applications
         </p>

         <p>
            <b>
               Marc Schreiber, M.â€†Sc.<br>
               aixigo AG
            </b>
         </p>

         <p class="footnote">
            <a href="https://github.com/aixigo/PREvant">
                  <i class="fab fa-github"></i> https://github.com/aixigo/PREvant
            </a>
         </p>
      </div>
    </div>

    <div id="agenda" class="step" data-x="0" data-y="-17000" data-z="-5000" data-rotate-x="90" data-scale="1"
         data-rotate-y="0" data-rotate-z="180">

        <h1>Agenda</h1>
        <ul id="agenda-list"></ul>

    </div>


    <div data-section="Scenario" id="scenario" class="step" data-x="0" data-y="100" data-z="1000" data-scale="1">
        <h2>Why do we use Microservices?</h2>

        <ul>
            <li>Scalable</li>
            <li>Fast deployment cycle</li>
            <li>Superior quality</li>
            <li>Greater flexibility</li>
        </ul>

        <p class="footnote">At aixigo we are in the migration phase.</p>
    </div>

    <div id="preview" class="step" data-x="0" data-y="4440" data-z="1000" data-scale="1">
        <h2>How do you transit from monolith to microservices?</h2>
        <img src="../assets/initial-preview.svg">
    </div>

    <div id="chaos" class="step" data-x="2350" data-y="7500" data-z="1000" data-scale="1">
        <img src="../assets/in-the-beginning.svg">
    </div>

    <div id="git-flow" class="step" data-x="2500" data-y="4500" data-z="1000" data-scale="1"
         data-rotate-x="-90" data-rotate-y="90">

        <img src="../assets/git-flow.svg">
    </div>

    <div id="chaos-recap" class="step" data-x="2350" data-y="7500" data-z="1000" data-scale="1">
        <h2>How to simplify preview deployment<br>
         and quality assurance?</h2>
    </div>


    <div data-section="PREvant" id="nutshell" class="step" data-x="2500" data-y="20000" data-z="1000" data-scale="1">
        <h2>PREvant in a nutshell</h2>
        <img src="../assets/chaos-resolved-1.svg">
    </div>

    <div id="chaos-resolved" class="step" data-x="5000" data-y="22000" data-z="1000"
         data-scale="1">
        <img src="../assets/chaos-resolved-2.svg">
    </div>


    <div data-section="Demo" id="demo" class="step" data-x="0" data-y="21000" data-z="1000" data-scale="1"
         data-rotate-x="-90" data-rotate-y="-90">

        <h2>Demo</h2>

        <img src="../assets/screenshot.png">

        <p class="footnote">
            <a href="https://www.youtube.com/watch?v=eHS_Gol2Mv0">
                FinovateFall 2018: <i class="fab fa-youtube" style="color: #ff0000"></i> https://www.youtube.com/watch?v=eHS_Gol2Mv0
            </a>
        </p>
    </div>

    <div data-section="How does it work" id="work-1" class="step" data-x="0" data-y="21000" data-z="-2000" data-scale="1"
         data-rotate-x="-90" data-rotate-y="-90">
        <h2>How does it work?</h2>

        <ul>
            <li>Provides a RESTful API to abstract microservice deployment</li>
            <li>Services of multiple repository are combined into one application</li>
            <li>Replication from master</li>
            <li>Companions for infrastructure services</li>
        </ul>
    </div>

    <div id="work-2" class="step" data-x="0" data-y="21000" data-z="-4000" data-scale="1"
         data-rotate-x="-90" data-rotate-y="-90">

        <h2>It is just a Docker setup</h2>

        <pre><code class="yaml">
version: "3"
services:
  prevant:
    image: aixigo/prevant
    labels:
      traefik.frontend.rule: 'PathPrefix:/,/index.html,/init.css,/app.js,/openapi.yaml,/api'
      traefik.frontend.priority: -100
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ./PREvant-config.toml:/app/config.toml

  traefik:
    image: traefik:alpine
    command: --api --docker
    network_mode: "bridge"
    ports:
      - "80:80"
      - "8080:8080"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
        </code></pre>
    </div>


    <div id="work-3" class="step" data-x="0" data-y="21000" data-z="-6000" data-scale="1"
         data-rotate-x="-90" data-rotate-y="-90">

        <h2>Companions</h2>

        <pre><code class="ini">
[[companions]]
# A database for each service
[companions.mariadb]
type = 'service'
image = 'mariadb:10.3'
serviceName = '{{service.name}}-db'
env = [ 'MYSQL_DATABASE={{service.name}}', 'MYSQL_ALLOW_EMPTY_PASSWORD=yes'

# A OpenID provide for the application
[companions.openid]
type = 'application'
image = 'registry.example.com/org/openid-provider:latest'
serviceName = 'openid'
        </code></pre>

        <p class="footnote">Handlebars templates to configure companions</p>
    </div>


    <div data-section="Q&A" id="qa" class="step" data-x="0" data-y="21000" data-z="2000" data-scale="0.2"
         data-rotate-x="-90" data-rotate-y="-90">

        <h2>Thank you for your attention.</h2>
        <p>Any questions?</p>
    </div>

</div>

<footer>
    <div id="section-name"></div>
    <div id="slide-numbers"></div>
</footer>

<script src="js/impress.js"></script>
<script>
    const rootElement = document.getElementById("impress");

    const slides = Array.prototype.slice.call(rootElement.getElementsByTagName("div"));

    const slideSectionMapping = {};
    let currentSection = undefined;
    let index = 0;
    slides.forEach(function (slide) {
        const section = slide.dataset.section;
        if (section != null) {
            currentSection = {name: section, index};
            ++index;
        }
        slideSectionMapping[slide.id] = currentSection;
    });

    rootElement.addEventListener("impress:stepenter", function (e) {
        const index = slides.indexOf(e.explicitOriginalTarget) + 1;

        const slideNumbers = document.getElementById("slide-numbers");
        slideNumbers.innerHTML = `${index} / ${slides.length}`;

        const section = slideSectionMapping[e.explicitOriginalTarget.id];
        const sectionName = document.getElementById("section-name");
        sectionName.innerHTML = section.name;
    });

    const sections = Array.from(new Set(Object.keys(slideSectionMapping)
        .map(function (key) {
            return slideSectionMapping[key]
        })))
        .filter(function (section) {
            return section.index > 0;
        })
        .sort(function (a, b) {
            return a.index - b.index;
        });

    const agendaList = document.getElementById("agenda-list");
    sections.forEach(function (section) {
        const li = document.createElement("li");
        li.innerHTML = section.name;
        agendaList.appendChild(li);
    });

    impress().init();

    hljs.initHighlightingOnLoad();
</script>
</body>
</html>
